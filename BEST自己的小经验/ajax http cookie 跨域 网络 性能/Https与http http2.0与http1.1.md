> 目录
>
> 1. https 与 http
>
> 2. http2.0 与 http1.1

#### 1.https 与 http
`HTTP协议`（超文本传输协议）以明文方式发送内容，不提供任何方式的数据加密，如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息，因此，HTTP协议不适合传输一些敏感信息，比如：信用卡号、密码等支付信息。

`安全套接字层超文本传输协议HTTPS`，为了数据传输的安全，HTTPS在HTTP的基础上加入了SSL协议，SSL依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。

#### 2.http2.0 与 http1.1

##### 2.1 多路复用 (Multiplexing)
**多路复用允许同时通过单一的 HTTP/2 连接发起多重的请求-响应消息。**

在 `HTTP/1.1 协议`中 「浏览器客户端在同一时间，针对同一域名下的请求有一定数量限制。超过限制数目的请求会被阻塞」。

*不同浏览器对请求的限制数：*
![不同浏览器对请求的限制数](https://pic3.zhimg.com/80/faedeb3dae59455f6520d6a5dbf436e5_hd.jpg)

而 `HTTP/2` 的多路复用(Multiplexing) 则允许同时通过单一的 `HTTP/2` 连接发起多重的请求-响应消息。因 `HTTP/2` 可以很容易的去实现多流并行而不用依赖建立多个 `TCP 连接`，`HTTP/2` 把 HTTP 协议通信的基本单位缩小为一个一个的帧，这些帧对应着逻辑流中的消息。并行地在同一个 `TCP 连接`上**双向交换**信息。

**那么，`HTTP/2` 是如何突破 `HTTP1.1` 的性能限制，改进传输性能，实现低延迟和高吞吐量的？**

关键就是在应用层(`HTTP/2`)和传输层(`TCP or UDP`)之间增加一个**二进制分帧层**。
![image](https://pic4.zhimg.com/80/906e22193e61cd561325d93aae0f1e07_hd.jpg)

*在二进制分帧层中， `HTTP/2` 会将所有传输的信息分割为更小的消息和帧,并对它们采用二进制格式的编码 ，其中 `HTTP1.x` 的首部信息会被封装到 `HEADER frame`，而相应的 `请求包体` 则封装到 `DATA frame` 里面。
`HTTP/2` 通信都在一个连接上完成，这个连接可以承载任意数量的双向数据流。
在过去， `HTTP` 性能优化的关键并不在于高带宽，而是低延迟。`TCP连接` 会随着时间进行自我协调，起初会限制连接的最大速度，如果数据成功传输，会随着时间的推移提高传输的速度。这种调谐则被称为 `TCP慢启动` 。由于这种原因，让原本就具有突发性和短时性的 `HTTP` 连接变的十分低效。`HTTP/2` 通过让所有数据流共用同一个连接，可以更有效地使用 `TCP连接`，让高带宽也能真正的服务于 `HTTP` 的性能提升。*

简而言之就是，
<li>单连接多资源的方式，减少服务端的链接压力,内存占用更少,连接吞吐量更大</li>
<li>由于 `TCP连接`的减少而使网络拥塞状况得以改善，同时慢启动时间的减少使拥塞和丢包恢复速度更快</li>

##### 2.2 首部压缩（Header Compression）
`HTTP/1.1`并不支持 `HTTP` 首部压缩，`HTTP/2` 则使用了专门为首部压缩而设计的 `HPACK` 算法。

##### 2.3 服务端推送（Server Push）
`服务端推送`本身是一种在客户端请求之前发送数据的机制。在 `HTTP/2` 中，服务器可以对客户端的一个请求发送多个响应。如果一个请求是由你的主页发起的，服务器很可能会响应主页内容、logo以及样式表，因为它知道客户端会用到这些东西。这相当于在一个 `HTML文档` 内集合了所有的资源。